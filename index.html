<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta charset="UTF-8">
		<meta name="description" content="ç™¾å¹´è—å†åœ¨çº¿æŸ¥è¯¢å·¥å…·ï¼Œæä¾›1951å¹´-2051å¹´å…¬å†è—å†å¯¹ç…§æŸ¥è¯¢ï¼ŒåŒ…å«è—å†èŠ‚æ—¥ã€ä½›æ•™æ®Šèƒœæ—¥ã€æ—¥æœˆé£Ÿä¿¡æ¯ç­‰è¯¦ç»†ä¿¡æ¯ã€‚æ”¯æŒç®€ä½“ä¸­æ–‡å’Œç¹ä½“ä¸­æ–‡ï¼Œå“åº”å¼è®¾è®¡é€‚é…æ‰‹æœºå¹³æ¿ç”µè„‘ã€‚">
		<meta name="keywords" content="è—å†,ç™¾å¹´è—å†,è—å†æŸ¥è¯¢,å…¬å†è—å†å¯¹ç…§,è—å†èŠ‚æ—¥,ä½›æ•™èŠ‚æ—¥,æ®Šèƒœæ—¥,ä½›æ•™æ®Šèƒœæ—¥,è²å¸ˆèŸä¾›æ—¥,ç¥å˜èŠ‚,é‡Šè¿¦ç‰Ÿå°¼ä½›èŠ‚æ—¥,è§‚éŸ³è©è¨èŠ‚æ—¥,æ—¥æœˆé£Ÿ,ä¸‡å¹´å†,åœ¨çº¿æ—¥å†,è—å†æœˆå†,è¥¿è—å†æ³•,è—æ—ä¼ ç»ŸèŠ‚æ—¥,ä½›æ•™å‰ç¥¥æ—¥">
		<meta name="author" content="Stone Huang">
		<meta name="robots" content="index, follow">
		<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
		<meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
		
		<!-- é¢å¤–çš„SEOæ ‡ç­¾ -->
		<meta name="theme-color" content="#8B4513">
		<meta name="msapplication-TileColor" content="#8B4513">
		<meta name="msapplication-TileImage" content="/apple-touch-icon.png">
		<link rel="canonical" href="https://zangli.org/">
		
			<!-- Open Graph æ ‡ç­¾ -->
	<meta property="og:title" content="ç™¾å¹´è—å† - åœ¨çº¿è—å†æŸ¥è¯¢å·¥å…·">
	<meta property="og:description" content="æä¾›1951å¹´-2051å¹´å…¬å†è—å†å¯¹ç…§æŸ¥è¯¢ï¼ŒåŒ…å«è—å†èŠ‚æ—¥ã€ä½›æ•™æ®Šèƒœæ—¥ã€æ—¥æœˆé£Ÿä¿¡æ¯ç­‰è¯¦ç»†ä¿¡æ¯ã€‚">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://zangli.org/">
	<meta property="og:image" content="https://zangli.org/logo-250x250-circle.png">
	<meta property="og:image:width" content="250">
	<meta property="og:image:height" content="250">
	<meta property="og:image:type" content="image/png">
	<meta property="og:site_name" content="ç™¾å¹´è—å†">
	<meta property="og:locale" content="zh_CN">
	<meta property="og:locale:alternate" content="zh_TW">
	
	<!-- Twitter Card æ ‡ç­¾ -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="ç™¾å¹´è—å† - åœ¨çº¿è—å†æŸ¥è¯¢å·¥å…·">
	<meta name="twitter:description" content="æä¾›1951å¹´-2051å¹´å…¬å†è—å†å¯¹ç…§æŸ¥è¯¢ï¼ŒåŒ…å«è—å†èŠ‚æ—¥ã€ä½›æ•™æ®Šèƒœæ—¥ã€æ—¥æœˆé£Ÿä¿¡æ¯ç­‰è¯¦ç»†ä¿¡æ¯ã€‚">
	<meta name="twitter:image" content="https://zangli.org/logo-250x250-circle.png">
		
			<!-- ç½‘ç«™å›¾æ ‡ -->
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	
	<!-- åœ†å½¢å›¾æ ‡æ ·å¼ -->
	<style>
		.app-icon-circular {
			border-radius: 50%;
			overflow: hidden;
		}
	</style>
		
		<title>ç™¾å¹´è—å† - åœ¨çº¿è—å†æŸ¥è¯¢å·¥å…· | å…¬å†è—å†å¯¹ç…§ | è—å†èŠ‚æ—¥æŸ¥è¯¢ | ä½›æ•™æ®Šèƒœæ—¥</title>
		
			<!-- å¤šè¯­è¨€æ”¯æŒ -->
	<link rel="alternate" hreflang="zh-CN" href="https://zangli.org/" />
	<link rel="alternate" hreflang="zh-TW" href="https://zangli.org/tw/" />
	<link rel="alternate" hreflang="x-default" href="https://zangli.org/" />
		
			<!-- ç»“æ„åŒ–æ•°æ® -->
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "WebApplication",
		"name": "ç™¾å¹´è—å†",
		"url": "https://zangli.org/",
		"description": "æä¾›1951å¹´-2051å¹´å…¬å†è—å†å¯¹ç…§æŸ¥è¯¢ï¼ŒåŒ…å«è—å†èŠ‚æ—¥ã€ä½›æ•™æ®Šèƒœæ—¥ã€æ—¥æœˆé£Ÿä¿¡æ¯ç­‰è¯¦ç»†ä¿¡æ¯",
		"applicationCategory": "Calendar",
		"operatingSystem": "All",
		"logo": {
			"@type": "ImageObject",
			"url": "https://zangli.org/logo-250x250-circle.png",
			"width": 250,
			"height": 250
		},
		"image": "https://zangli.org/logo-250x250-circle.png",
		"offers": {
			"@type": "Offer",
			"price": "0",
			"priceCurrency": "CNY"
		},
		"author": {
			"@type": "Person",
			"name": "Stone Huang"
		},
		"datePublished": "2024-01-01",
		"inLanguage": ["zh-CN", "zh-TW"],
		"keywords": "è—å†,ç™¾å¹´è—å†,è—å†æŸ¥è¯¢,å…¬å†è—å†å¯¹ç…§,è—å†èŠ‚æ—¥,ä½›æ•™èŠ‚æ—¥,æ®Šèƒœæ—¥,ä½›æ•™æ®Šèƒœæ—¥,è²å¸ˆèŸä¾›æ—¥,ç¥å˜èŠ‚,é‡Šè¿¦ç‰Ÿå°¼ä½›èŠ‚æ—¥,è§‚éŸ³è©è¨èŠ‚æ—¥,æ—¥æœˆé£Ÿ,ä¸‡å¹´å†,ä½›æ•™å‰ç¥¥æ—¥"
	}
	</script>
		
		<script src="js/langDetect.js"></script>

		<style>
			:root {
				--primary-color: #8B4513;
				--secondary-color: #CD853F;
				--accent-color: #FF6B35;
				--text-color: #2C1810;
				--bg-color: #FFF8F0;
				--card-bg: #FFFFFF;
				--border-color: #E5D5C8;
				--today-bg: #FFE4B5;
				--today-border: #FF8C00;
				--lunar-eclipse: #E6E6FF;
				--solar-eclipse: #FFE6E6;
				--shadow: 0 2px 10px rgba(139, 69, 19, 0.1);
				--shadow-hover: 0 4px 20px rgba(139, 69, 19, 0.15);
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: 'Segoe UI', 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, var(--bg-color) 0%, #F5E6D3 100%);
				color: var(--text-color);
				line-height: 1.6;
				min-height: 100vh;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
			}

                        .header {
                                text-align: center;
                                margin-bottom: 20px;
                                padding: 10px 20px;
                                background: var(--card-bg);
                                border-radius: 15px;
                                box-shadow: var(--shadow);
                                position: relative;
                        }

                        .lang-switch {
                                position: absolute;
                                top: 10px;
                                right: 20px;
                                font-size: 0.9rem;
                        }

			.header h1 {
				font-size: 2.5rem;
				color: var(--primary-color);
				margin-bottom: 10px;
				font-weight: 700;
			}

			.header .subtitle {
				font-size: 1.1rem;
				color: var(--secondary-color);
				margin-bottom: 0px;
			}

			.selected-day {
				background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
				color: white;
				padding: 15px 25px;
				border-radius: 15px;
				font-size: 1.2rem;
				font-weight: 600;
				box-shadow: var(--shadow);
				margin-bottom: 10px;
				text-align: center;
				line-height: 1.3;
				max-width: 90%;
				height: 85px;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				margin-left: auto;
				margin-right: auto;
				overflow: hidden;
			}

			.selected-day .festival-info {
				font-size: 0.9rem;
				margin-top: 3px;
				margin-bottom: 0;
				opacity: 0.95;
				font-weight: 500;
				line-height: 1.2;
			}

			.selected-day-bottom {
				background: var(--card-bg);
				border: 2px solid var(--primary-color);
				border-radius: 15px;
				padding: 20px;
				margin: 30px 0;
				text-align: center;
				box-shadow: var(--shadow);
				font-size: 1.1rem;
				color: var(--text-color);
				line-height: 1.3;
				height: 100px;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				overflow: hidden;
			}

			.selected-day-bottom .festival-info {
				color: var(--accent-color);
				font-weight: 600;
				margin-top: 5px;
				margin-bottom: 0;
				font-size: 0.95rem;
				line-height: 1.2;
			}

			.controls {
				display: flex;
				flex-direction: row !important;
				justify-content: center;
				align-items: center;
				gap: 12px;
				margin-bottom: 20px;
				padding: 0 10px;
			}

			.controls label {
				font-weight: 600;
				color: var(--primary-color);
				font-size: 1.1rem;
			}

			.controls select {
				padding: 12px 20px;
				border: 2px solid var(--border-color);
				border-radius: 8px;
				font-size: 1.1rem;
				background: var(--card-bg);
				color: var(--text-color);
				cursor: pointer;
				transition: all 0.3s ease;
				min-width: 100px;
			}

			.controls select:hover {
				border-color: var(--secondary-color);
				box-shadow: 0 2px 8px rgba(139, 69, 19, 0.1);
			}

			.controls select:focus {
				outline: none;
				border-color: var(--primary-color);
				box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
			}

			.controls > .nav-btn, .controls > .nav-btn.today-btn {
				flex: 1 1 0;
				min-width: 0;
				padding-left: 0;
				padding-right: 0;
			}

			.nav-btn, .nav-btn.today-btn {
				min-width: 64px;
				height: 42px;
				padding: 0 18px;
				border-radius: 16px;
				font-size: 1rem;
				font-weight: 600;
				border: none;
				box-shadow: 0 2px 8px rgba(139,69,19,0.08);
				transition: all 0.18s cubic-bezier(.4,2,.6,1);
				display: flex;
				align-items: center;
				justify-content: center;
				background: var(--card-bg);
				color: var(--text-color);
				cursor: pointer;
			}

			.nav-btn.today-btn {
				background: linear-gradient(45deg, var(--accent-color), #FF8C42);
				color: #fff;
				box-shadow: 0 4px 16px rgba(255,107,53,0.12);
			}

			.nav-btn:hover, .nav-btn:focus {
				transform: translateY(-2px) scale(1.04);
				box-shadow: 0 6px 20px rgba(139,69,19,0.18);
				z-index: 1;
			}

			.nav-btn:active {
				transform: scale(0.98);
			}

			.nav-btn.prev-year,
			.nav-btn.next-year {
				background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
				color: white;
				border-color: var(--primary-color);
				flex: 1;
			}

			.nav-btn.prev-month,
			.nav-btn.next-month {
				background: linear-gradient(45deg, var(--secondary-color), #DEB887);
				color: var(--text-color);
				border-color: var(--secondary-color);
				flex: 1;
			}

			/* ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡ */
			@media (max-width: 768px) {
				.controls {
					gap: 6px;
					padding: 0 4px;
				}
				.nav-btn, .nav-btn.today-btn {
					min-width: 48px;
					height: 36px;
					font-size: 0.95rem;
					border-radius: 12px;
					padding: 0 8px;
				}
			}

			@media (max-width: 480px) {
				.controls {
					gap: 3px;
					padding: 0 3px;
				}
				
				.nav-btn, .nav-btn.today-btn {
					height: 32px;
					line-height: 32px;
				}
				
				.nav-btn {
					padding: 8px 3px;
					font-size: 0.75rem;
					min-width: 0;
					flex: 1;
				}
				
				.nav-btn span {
					display: none;
				}
				
				.nav-btn.prev-year::after {
					content: "â—€å¹´";
				}
				
				.nav-btn.next-year::after {
					content: "å¹´â–¶";
				}
				
				.nav-btn.prev-month::after {
					content: "â—€æœˆ";
				}
				
				.nav-btn.next-month::after {
					content: "æœˆâ–¶";
				}
				
				.nav-btn.today-btn {
					font-size: 0;
					flex: 1;
				}
				
				.nav-btn.today-btn::after {
					content: "ä»Šå¤©";
					font-size: 0.75rem;
				}
			}

			@media (max-width: 360px) {
				.controls {
					gap: 2px;
					padding: 0 2px;
				}
				
				.nav-btn {
					padding: 6px 2px;
					font-size: 0.7rem;
					min-width: 0;
					flex: 1;
				}
			}

			.calendar-container {
				background: var(--card-bg);
				border-radius: 15px;
				box-shadow: var(--shadow);
				overflow: hidden;
				margin-bottom: 30px;
			}

			.calendar-table {
				width: 100%;
				border-collapse: collapse;
			}

			.calendar-table th {
				background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
				color: white;
				padding: 15px 8px;
				font-weight: 600;
				font-size: 1rem;
				text-align: center;
				border: none;
				white-space: nowrap;
			}

			.calendar-table td {
				border: 1px solid var(--border-color);
				padding: 8px;
				vertical-align: top;
				height: 100px;
				width: 14.28%;
				position: relative;
				cursor: pointer;
				transition: background-color 0.15s ease, box-shadow 0.15s ease, transform 0.1s ease;
				background: var(--card-bg);
			}

			.calendar-table td:active {
				transform: scale(0.98);
				transition: transform 0.05s ease;
			}

			.calendar-table td:not(:active) {
				transition: transform 0.1s ease;
			}

			.calendar-table td:hover {
				background: #F8F8F8;
				box-shadow: inset 0 0 10px rgba(139, 69, 19, 0.1);
			}

			.calendar-table td.today {
				background: var(--today-bg);
				border: 2px solid var(--today-border);
				box-shadow: 0 0 15px rgba(255, 140, 0, 0.3);
			}

			.calendar-table td.today::before {
				content: "ä»Šå¤©";
				position: absolute;
				top: 2px;
				right: 2px;
				background: var(--accent-color);
				color: white;
				font-size: 0.7rem;
				padding: 2px 6px;
				border-radius: 10px;
				font-weight: 600;
			}

			.calendar-table td.selected {
				background: #E8F4FD !important;
				border: 2px solid #4A90E2 !important;
				box-shadow: 0 0 10px rgba(74, 144, 226, 0.3) !important;
				transition: none !important;
			}

			.calendar-table td.selected.today {
				background: linear-gradient(135deg, var(--today-bg) 0%, #E8F4FD 100%) !important;
				border: 2px solid var(--today-border) !important;
				box-shadow: 0 0 15px rgba(255, 140, 0, 0.4) !important;
				transition: none !important;
			}

			.day-number {
				font-size: 1.2rem;
				font-weight: 600;
				color: var(--text-color);
				margin-bottom: 4px;
			}

			.day-number.first-day {
				text-align: center;
			}

			.lunar-date {
				font-size: 1rem;
				color: var(--primary-color);
				font-weight: 600;
				margin-bottom: 2px;
				text-align: center;
			}

			.lunar-date.festival {
				position: relative;
			}

			.lunar-date.festival::before {
				content: "ğŸ‰";
				position: absolute;
				top: -2px;
				right: -2px;
				font-size: 0.6rem;
				opacity: 0.8;
				animation: festivalPulse 2s infinite;
			}

			@keyframes festivalPulse {
				0%, 100% { transform: scale(1); opacity: 0.8; }
				50% { transform: scale(1.2); opacity: 1; }
			}

			.lunar-month {
				color: var(--accent-color);
				font-weight: 700;
			}

			.extra-info {
				font-size: 0.8rem;
				color: var(--secondary-color);
				text-align: center;
				line-height: 1.2;
			}

			.eclipse-info {
				font-size: 0.75rem;
				color: #666;
				text-align: center;
				margin-top: 2px;
			}

			.lunareclipse {
				background: var(--lunar-eclipse) !important;
			}

			.solareclipse {
				background: var(--solar-eclipse) !important;
			}

			.info-section {
				background: var(--card-bg);
				border-radius: 15px;
				padding: 25px;
				box-shadow: var(--shadow);
				margin-bottom: 20px;
			}

			.info-section h3 {
				color: var(--primary-color);
				margin-bottom: 15px;
				font-size: 1.3rem;
			}

			.info-section p {
				margin-bottom: 10px;
				color: var(--text-color);
			}

			.mobile-tip {
				background: linear-gradient(45deg, var(--accent-color), #FF8C42);
				color: white;
				padding: 15px;
				border-radius: 10px;
				text-align: center;
				font-weight: 600;
				margin-bottom: 20px;
			}

			.navigation-hint {
				text-align: center;
				color: var(--secondary-color);
				font-size: 0.9rem;
				margin-bottom: 20px;
				padding: 10px;
				background: rgba(139, 69, 19, 0.05);
				border-radius: 8px;
			}

			.festival-tooltip {
				position: fixed;
				background: var(--card-bg);
				border: 2px solid var(--accent-color);
				border-radius: 10px;
				padding: 15px;
				box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
				z-index: 1000;
				max-width: 280px;
				font-size: 0.9rem;
				color: var(--text-color);
				display: none;
				animation: tooltipFadeIn 0.3s ease-out;
			}

			.festival-tooltip::before {
				content: "ğŸ‰";
				font-size: 1.2rem;
				margin-right: 8px;
			}

			.festival-tooltip .close-btn {
				position: absolute;
				top: 5px;
				right: 8px;
				background: none;
				border: none;
				font-size: 1.2rem;
				cursor: pointer;
				color: var(--secondary-color);
			}

			@keyframes tooltipFadeIn {
				from { opacity: 0; transform: scale(0.8); }
				to { opacity: 1; transform: scale(1); }
			}

			/* å“åº”å¼è®¾è®¡ */
			@media (max-width: 768px) {
				.container {
					padding: 10px;
				}

				.header h1 {
					font-size: 2rem;
				}

				.selected-day {
					height: 90px;
					padding: 12px 20px;
					font-size: 1.1rem;
				}

				.selected-day .festival-info {
					font-size: 0.85rem;
				}

				.selected-day-bottom {
					height: 110px;
					padding: 15px;
				}

				.selected-day-bottom .festival-info {
					font-size: 0.9rem;
				}

				.calendar-table td {
					height: 60px;
					padding: 4px;
				}

				.day-number {
					font-size: 1rem;
				}

				.lunar-date {
					font-size: 0.9rem;
				}

				.extra-info {
					font-size: 0.7rem;
				}

				.eclipse-info {
					font-size: 0.65rem;
				}

				.controls {
					flex-direction: column;
					gap: 10px;
				}

				.controls select {
					width: 100%;
					max-width: 200px;
				}

                                .today-btn {
                                        width: 100%;
                                        max-width: 200px;
                                        margin-top: 0;
                                }
                        }

			@media (max-width: 480px) {
				.calendar-table td {
					height: 60px;
					padding: 2px;
				}

				.day-number {
					font-size: 0.9rem;
				}

				.lunar-date {
					font-size: 0.8rem;
				}

				.extra-info {
					display: none;
				}

				.eclipse-info {
					font-size: 0.6rem;
				}

				.lunar-date.festival::before {
					font-size: 0.5rem;
					top: -1px;
					right: -1px;
				}
			}

			/* åŠ¨ç”»æ•ˆæœ */
			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(20px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.calendar-container {
				animation: fadeIn 0.6s ease-out;
			}

			/* éšè—/æ˜¾ç¤ºç±» */
			.narrow { display: none; }
			.wide { display: block; }

                        @media (max-width: 639px) {
                                .narrow { display: block; }
                                .wide { display: none; }
                        }

                        /* æ—¥æœŸè¯¦æƒ…å¼¹å±‚ */
                        #detailMask {
                                position: fixed;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                background: rgba(0,0,0,0.3);
                                display: none;
                                z-index: 999;
                        }

                        #detailDialog {
                                background: var(--card-bg);
                                border-radius: 12px;
                                box-shadow: var(--shadow);
                                padding: 20px;
                                max-width: 480px;
                                width: 90%;
                                max-height: 85vh;
                                overflow-y: auto;
                                position: fixed;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                z-index: 1000;
                                display: none;
                        }

                        #detailDialog.bottom-sheet {
                                position: fixed;
                                top: auto;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                transform: translateY(100%);
                                width: 100%;
                                max-width: none;
                                max-height: 80vh;
                                overflow-y: auto;
                                border-radius: 12px 12px 0 0;
                                transition: transform 0.15s ease-out;
                        }

                        #detailDialog.bottom-sheet.active {
                                transform: translateY(0);
                        }

                        #detailDialog .close-btn {
                                position: absolute;
                                top: 8px;
                                right: 8px;
                                background: none;
                                border: none;
                                font-size: 1.2rem;
                                cursor: pointer;
                                color: var(--secondary-color);
                                padding: 4px 8px;
                                border-radius: 4px;
                                transition: background-color 0.2s ease;
                        }

                        #detailDialog .close-btn:hover {
                                background-color: rgba(0, 0, 0, 0.1);
                        }

                        #detailDialog .dialog-header {
                                position: absolute;
                                top: 8px;
                                right: 8px;
                                display: flex;
                                gap: 8px;
                                align-items: center;
                                z-index: 1;
                        }

                        #detailDialog .dialog-header .close-btn {
                                position: static;
                                font-size: 1.2rem;
                                color: var(--secondary-color);
                                padding: 4px 8px;
                        }

                        #detailDialog .dialog-header .share-btn {
                                background: none;
                                border: none;
                                font-size: 0.9rem;
                                cursor: pointer;
                                color: var(--primary-color);
                                padding: 6px 12px;
                                border-radius: 4px;
                                transition: all 0.2s ease;
                                font-weight: 500;
                        }

                        #detailDialog .dialog-header .share-btn:hover {
                                background-color: var(--primary-color);
                                color: #fff;
                        }

                        #detailDialog .dialog-header .close-btn:hover {
                                background-color: rgba(0, 0, 0, 0.1);
                        }

                        #detailDialog .dialog-footer {
                                display: flex;
                                justify-content: center;
                                margin-top: 16px;
                                padding-top: 16px;
                                border-top: 1px solid var(--border-color);
                        }

                        #detailDialog .dialog-actions {
                                display: flex;
                                gap: 10px;
                                justify-content: center;
                                margin-top: 16px;
                                padding-top: 16px;
                                border-top: 1px solid var(--border-color);
                        }

                        #detailDialog .copy-btn {
                                padding: 8px 16px;
                                border: 1px solid var(--primary-color);
                                background: transparent;
                                color: var(--primary-color);
                                border-radius: 6px;
                                cursor: pointer;
                                font-size: 0.9rem;
                                transition: all 0.2s ease;
                        }

                        #detailDialog .copy-btn:hover {
                                background-color: var(--primary-color);
                                color: #fff;
                        }

                        #detailDialog h3 {
                                margin: 0 0 16px 0;
                                color: var(--primary-color);
                                font-size: 1.3rem;
                                border-bottom: 2px solid var(--border-color);
                                padding-bottom: 8px;
                        }

                        #detailDialog .detail-section {
                                margin-bottom: 16px;
                                padding: 12px;
                                background: rgba(0, 0, 0, 0.02);
                                border-radius: 8px;
                                border-left: 4px solid var(--primary-color);
                        }

                        #detailDialog .detail-section h4 {
                                margin: 0 0 8px 0;
                                color: var(--primary-color);
                                font-size: 1rem;
                                font-weight: 600;
                        }

                        #detailDialog .detail-section p {
                                margin: 4px 0;
                                color: var(--text-color);
                                font-size: 0.9rem;
                                line-height: 1.4;
                        }

                        #detailDialog .festival-section {
                                border-left-color: var(--accent-color);
                                background: rgba(255, 140, 0, 0.05);
                        }

                        #detailDialog .festival-section h4 {
                                color: var(--accent-color);
                        }

                        #detailDialog .festival-info {
                                font-weight: 600;
                                color: var(--accent-color);
                        }

                        #detailDialog .eclipse-section {
                                border-left-color: #4A90E2;
                                background: rgba(74, 144, 226, 0.05);
                        }

                        #detailDialog .eclipse-section h4 {
                                color: #4A90E2;
                        }

                        #detailDialog .date-url {
                                font-family: monospace;
                                font-size: 0.8rem;
                                background: rgba(0, 0, 0, 0.05);
                                padding: 6px 8px;
                                border-radius: 4px;
                                word-break: break-all;
                                color: var(--secondary-color);
                        }

                        /* å¼¹çª—å“åº”å¼è®¾è®¡ */
                        @media (max-width: 768px) {
                                #detailDialog {
                                        max-width: 95vw;
                                        margin: 20px auto;
                                        padding: 20px;
                                }

                                #detailDialog.bottom-sheet {
                                        max-height: 85vh;
                                        padding: 20px;
                                }

                                #detailDialog .dialog-header {
                                        top: 12px;
                                        right: 12px;
                                        gap: 12px;
                                }

                                #detailDialog .share-btn,
                                #detailDialog .close-btn {
                                        padding: 8px 10px;
                                        font-size: 1.3rem;
                                }

                                #detailDialog .detail-section {
                                        padding: 10px;
                                        margin-bottom: 12px;
                                }

                                #detailDialog .dialog-footer {
                                        margin-top: 20px;
                                        padding-top: 20px;
                                }

                                #detailDialog .copy-btn {
                                        width: 100%;
                                        padding: 12px;
                                }
                        }

                        @media (max-width: 480px) {
                                #detailDialog {
                                        padding: 16px;
                                }

                                #detailDialog h3 {
                                        font-size: 1.1rem;
                                        margin-bottom: 12px;
                                        padding-right: 60px;
                                }

                                #detailDialog .dialog-header {
                                        top: 8px;
                                        right: 8px;
                                        gap: 8px;
                                }

                                #detailDialog .share-btn,
                                #detailDialog .close-btn {
                                        padding: 6px 8px;
                                        font-size: 1.2rem;
                                }

                                #detailDialog .detail-section h4 {
                                        font-size: 0.9rem;
                                }

                                #detailDialog .detail-section p {
                                        font-size: 0.85rem;
                                }

                                #detailDialog .date-url {
                                        font-size: 0.75rem;
                                }

                                #detailDialog .copy-btn {
                                        padding: 10px;
                                        font-size: 0.85rem;
                                }
                        }
		</style>

			<script>
	// ç»Ÿä¸€åŸºè·¯å¾„ä¸ç¹ä¸­å­è·¯å¾„åˆ¤æ–­ï¼Œæ”¯æŒæ ¹åŸŸåä¸é¡¹ç›®å­ç›®å½•
	const { pathname } = location;
	const segs = pathname.split('/').filter(Boolean);
	const firstSeg = segs[0] || '';
	const inTw = segs.includes('tw');
	const siteRoot = /^tw$/i.test(firstSeg) ? '/' : (firstSeg ? `/${firstSeg}/` : '/');
	const basePath = inTw ? siteRoot + 'tw/' : siteRoot;
	
	const $ = id => document.getElementById(id);
		let $m, $y;
		const today_raw = new Date();
		const today = new Date(today_raw.getFullYear(), today_raw.getMonth(), today_raw.getDate());
		let selectedCell = null;
		function zangli_callback() {
			// ç¡®ä¿DOMå·²ç»åŠ è½½å®Œæˆ
			if (!document.body || !$("selectedDay") || !$("selectedDayBottom")) {
				// å¦‚æœDOMè¿˜æ²¡å‡†å¤‡å¥½ï¼Œå»¶è¿Ÿæ‰§è¡Œ
				setTimeout(zangli_callback, 100);
				return;
			}
			
			const h = location.hash;
			$m = $("month");
			$y = $("year");

			// Use the raw date for zangli calculations
			const d_raw = h ? new Date(h.substr(1)) : today_raw;
			let d = d_raw;

			if (d < startDate) d = startDate;
			if (d > endDate) d = endDate;
			
			// æ›´æ–°é€‰ä¸­æ—¥æœŸæ˜¾ç¤º
			updateSelectedDayDisplay(d);
			
			// æ¸…é™¤ä¹‹å‰çš„é€‰ä¸­çŠ¶æ€
			selectedCell = null;
			hideFestivalTooltip();
			$y.options.length = 0;
			for (let i = 1951; i < 2052; i++) {
				$y.appendChild(new Option(i));
			}
			$m.options.length = 0;
			
			for (let i = 1; i < 13; i++) {
				if (!(d.getFullYear() === 2051 && i > 2))
					$m.appendChild(new Option(i));
			}
			$y.value = d.getFullYear();
			$m.value = d.getMonth() + 1;

			const tbody = document.getElementsByTagName("tbody")[0];
			while (tbody.rows.length > 1) {
				tbody.deleteRow(tbody.rows.length - 1);
			}
			let tr, td;
			const d0 = new Date(d.getFullYear(), d.getMonth(), 1); //æœˆåˆ
			const d1 = new Date(d.getFullYear(), d.getMonth() + 1, 0); //æœˆæœ«
			tr = tbody.insertRow();
			for (let i = 0; i < d0.getDay(); i++) {
				td = tr.insertCell();
			}
			let d3;
			for (let i = d0.getDate(); i <= d1.getDate(); i++) {
				d3 = new Date(d.getFullYear(), d.getMonth(), i);
				if (d3.getDay() === 0) {
					tr = tbody.insertRow();
				}
				const z = getZangli(d3);
				const ecl = getEclipse(d3);
				const t = [];
				
				// æ£€æŸ¥æ˜¯å¦æ˜¯ä»Šå¤©
				const isToday = d3.getFullYear() === today.getFullYear() && 
								d3.getMonth() === today.getMonth() && 
								d3.getDate() === today.getDate();

				if (i === d0.getDate()) {
					t.push(`<div class='day-number first-day'><span class='wide'>${d.getFullYear()}å¹´${d.getMonth() + 1}æœˆ1æ—¥</span><span class='narrow'>${i}</span>`);
				} else {
					t.push(`<div class='day-number'>${i}`);
				}
				// æ£€æŸ¥æ˜¯å¦æ˜¯èŠ‚æ—¥
				const isFestival = z.extraInfo && z.extraInfo.trim() !== "" && z.extraInfo !== "&nbsp;";
				const festivalClass = isFestival ? " festival" : "";
				
				t.push(`</div><div class='lunar-date${festivalClass}'>`);
				if (z.day === "åˆä¸€" || (z.day === "åˆäºŒ" && z.dayMiss))
					t.push(`<span class='lunar-month'>${z.month === 'æ­£' && !z.monthLeap ? z.year + "å¹´<br>" : ""}${z.month}æœˆ</span><br>${z.day}`);
				else if (z.value !== "error") t.push(z.day);
				t.push(`</div><div class='extra-info wide'>`);
				t.push(z.extraInfo ? z.extraInfo : "&nbsp;");
				t.push(`</div><div class='eclipse-info wide'>`);
				t.push(ecl.value ? `${ecl.value},${ecl.extraInfo.replace(/ï¼Œ/,",<br>")}` : (z.extraInfo2 ? z.extraInfo2 : "&nbsp;" ));
				t.push(`</div>`);
				td = tr.insertCell();
				td.innerHTML = t.join("");
				
				// æ·»åŠ ä»Šå¤©çš„æ ·å¼
				if (isToday) {
					td.className = "today";
				}
				
				if (z.value !== "error")
					td.title = `å…¬å†${d3.getFullYear()}å¹´${d3.getMonth() + 1}æœˆ${d3.getDate()}æ—¥ï¼Œè—å†${z.value}`;
				if (ecl.value !== "") {
					td.title = `${td.title},${ecl.value}`;
					if (/æ—¥/.test(ecl.value))
						td.className = (td.className || "") + " solareclipse";
					else
						td.className = (td.className || "") + " lunareclipse";
				}
				if (ecl.extraInfo !== "") {
					td.title = `${td.title},${ecl.extraInfo}`;
				}
			}
			for (let i = d3.getDay(); i < 6; i++) {
				tr.insertCell();
			}
		}
		function updateSelectedDayDisplay(date) {
			// Normalize the date to ensure consistency
			const normalizedDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
			const z = getZangli(normalizedDate);
			const dateStr = `å…¬å†${normalizedDate.getFullYear()}å¹´${normalizedDate.getMonth() + 1}æœˆ${normalizedDate.getDate()}æ—¥ï¼Œè—å†${z.value}`;
			
			// æ£€æŸ¥æ˜¯å¦æœ‰èŠ‚æ—¥ä¿¡æ¯
			let festivalInfo = "";
			if (z.extraInfo && z.extraInfo.trim() !== "" && z.extraInfo !== "&nbsp;") {
				festivalInfo = z.extraInfo.replace(/<br>/g, " ");
				if (z.extraInfo2 && z.extraInfo2.trim() !== "" && z.extraInfo2 !== "&nbsp;") {
					festivalInfo += `, ${z.extraInfo2}`;
				}
			}
			
			let html = dateStr;
			let bottomHtml = dateStr;
			if (festivalInfo) {
				html += `<div class="festival-info">${festivalInfo}</div>`;
				bottomHtml += `<div class="festival-info">${festivalInfo}</div>`;
			}
			
			// ç¡®ä¿DOMå…ƒç´ å­˜åœ¨åå†è®¾ç½®å†…å®¹
			const selectedDayElement = $("selectedDay");
			const selectedDayBottomElement = $("selectedDayBottom");
			
			if (selectedDayElement) {
				selectedDayElement.innerHTML = html;
			}
			if (selectedDayBottomElement) {
				selectedDayBottomElement.innerHTML = bottomHtml;
			}
		}

		function showDay(e) {
			if (!e) return;
			while (e && e.tagName !== "TD" && e.tagName !== "TABLE") {
				e = e.parentNode;
			}
			if (!e || e.tagName !== "TD") return;
			if (selectedCell) {
				selectedCell.classList.remove('selected');
			}
			if (e.innerHTML.trim() !== "") {
				selectedCell = e;
				e.classList.add('selected');
                                if (e.title) {
                                        const titleParts = e.title.split("ï¼Œ");
                                        if (titleParts.length >= 2) {
                                                const gregorianMatch = titleParts[0].match(/å…¬å†(\d+)å¹´(\d+)æœˆ(\d+)æ—¥/);
                                                if (gregorianMatch) {
                                                        const selectedDate = new Date(parseInt(gregorianMatch[1]), parseInt(gregorianMatch[2]) - 1, parseInt(gregorianMatch[3]));
                                                        updateSelectedDayDisplay(selectedDate);
                                                        openDetail(selectedDate, e);
                                                }
                                        } else {
                                                const selectedDayElement = $("selectedDay");
                                                if (selectedDayElement) {
                                                        selectedDayElement.innerHTML = e.title;
                                                }
                                        }
                                }
                        }
                }

		function showFestivalTooltip(cell) {
			hideFestivalTooltip();
			const title = cell.title || "";
			let festivalInfo = "";
			try {
				const extraInfoDiv = cell.querySelector('.extra-info');
				if (extraInfoDiv && extraInfoDiv.innerHTML && extraInfoDiv.innerHTML.trim() !== "&nbsp;" && extraInfoDiv.innerHTML.trim() !== "") {
					festivalInfo = extraInfoDiv.innerHTML.replace(/<br>/g, " ");
				}
				if (!festivalInfo && title.includes("ï¼Œ")) {
					const parts = title.split("ï¼Œ");
					for (let i = 1; i < parts.length; i++) {
						if (parts[i].includes("èŠ‚æ—¥") || parts[i].includes("ä½›") || parts[i].includes("è©è¨") || parts[i].includes("èŸä¾›")) {
							festivalInfo = parts[i];
							break;
						}
					}
				}
			} catch (err) {
				console.log("æå–èŠ‚æ—¥ä¿¡æ¯æ—¶å‡ºé”™:", err);
			}
			if (festivalInfo) {
				const tooltip = document.createElement('div');
				tooltip.className = 'festival-tooltip';
				tooltip.id = 'festivalTooltip';
				tooltip.innerHTML = `${festivalInfo}<button class="close-btn" onclick="hideFestivalTooltip()">Ã—</button>`;
				document.body.appendChild(tooltip);
				const rect = cell.getBoundingClientRect();
				const tooltipRect = tooltip.getBoundingClientRect();
				let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);
				let top = rect.top - tooltipRect.height - 10;
				if (left < 10) left = 10;
				if (left + tooltipRect.width > window.innerWidth - 10) {
					left = window.innerWidth - tooltipRect.width - 10;
				}
				if (top < 10) {
					top = rect.bottom + 10;
				}
				tooltip.style.left = `${left}px`;
				tooltip.style.top = `${top}px`;
				tooltip.style.display = 'block';
				setTimeout(hideFestivalTooltip, 3000);
			}
		}

		function hideFestivalTooltip() {
			const tooltip = document.getElementById('festivalTooltip');
			if (tooltip) {
				tooltip.remove();
			}
		}
			function changeDate(code) {
		// æ£€æŸ¥$må’Œ$yæ˜¯å¦å·²åˆå§‹åŒ–
		if (!$m || !$y) {
			return;
		}
		
		let m = $m.value;
		let y = $y.value;
		if (code === 37) {
			m--;
		} else if (code === 38) {
			y--;
		} else if (code === 39) {
			m++;
		} else if (code === 40) {
			y++;
		} else if (code !== "year" && code !== "month") {
			return;
		}
		if (m === 0) { y--; m = 12; }
		if (m === 13) { y++; m = 1; }
		location.replace(`${location.pathname}#${y}/${m}/1`);
		window.scrollTo(0, 0);
	}

		const goToToday = () => {
			const today = new Date();
			const currentHash = location.hash;
			const todayHash = `#${today.getFullYear()}/${today.getMonth() + 1}/${today.getDate()}`;
			if (currentHash === todayHash) {
				// å·²ç»åœ¨ä»Šå¤©æ‰€åœ¨çš„æœˆï¼Œæ‰‹åŠ¨è§¦å‘é€‰ä¸­ä»Šå¤©
				setTimeout(() => {
					const tbody = document.getElementsByTagName("tbody")[0];
					const tds = tbody.getElementsByTagName("td");
					for (let td of tds) {
						if (td.classList.contains("today")) {
							showDay(td);
							break;
						}
					}
				}, 10);
			} else {
				location.replace(`${location.pathname}${todayHash}`);
				window.scrollTo(0, 0);
			}
		};

		const changeYear = direction => {
			const currentYear = parseInt($y.value);
			const newYear = currentYear + direction;
			location.replace(`${location.pathname}#${newYear}/${$m.value}/1`);
			window.scrollTo(0, 0);
		};

const changeMonth = direction => {
			let currentMonth = parseInt($m.value);
			let currentYear = parseInt($y.value);
			let newMonth = currentMonth + direction;
			let newYear = currentYear;
			if (newMonth === 0) {
				newYear--;
				newMonth = 12;
			} else if (newMonth === 13) {
				newYear++;
				newMonth = 1;
			}
			location.replace(`${location.pathname}#${newYear}/${newMonth}/1`);
                       window.scrollTo(0, 0);
               };

               let detailMask, detailDialog, detailContent, activeDate;

               function initDetailElements() {
                       detailMask = document.getElementById('detailMask');
                       detailDialog = document.getElementById('detailDialog');
                       detailContent = document.getElementById('detailContent');
               }

               const pad = n => n.toString().padStart(2, '0');

               function buildDetailHTML(date) {
                       const z = getZangli(date);
                       const ecl = getEclipse(date);
                       const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                       
                       let html = `<h3 id="detailTitle">${date.getFullYear()}å¹´${date.getMonth()+1}æœˆ${date.getDate()}æ—¥ å‘¨${weekDays[date.getDay()]}</h3>`;
                       
                       // è—å†ä¿¡æ¯
                       html += `<div class="detail-section">`;
                       html += `<h4>ğŸ“– è—å†ä¿¡æ¯</h4>`;
                       html += `<p><strong>è—å†æ—¥æœŸï¼š</strong>${z.value}</p>`;
                       if (z.monthLeap) html += `<p><small>ğŸ”¸ é—°æœˆ</small></p>`;
                       if (z.dayLeap) html += `<p><small>ğŸ”¸ é—°æ—¥</small></p>`;
                       if (z.dayMiss) html += `<p><small>ğŸ”¸ ç¼ºæ—¥</small></p>`;
                       html += `</div>`;
                       
                       // èŠ‚æ—¥ä¿¡æ¯
                       if (z.extraInfo && z.extraInfo.trim() !== '' && z.extraInfo !== '&nbsp;') {
                               html += `<div class="detail-section festival-section">`;
                               html += `<h4>ğŸŠ èŠ‚æ—¥åº†å…¸</h4>`;
                               html += `<p class="festival-info">${z.extraInfo}</p>`;
                               if (z.extraInfo2 && z.extraInfo2.trim() !== '' && z.extraInfo2 !== '&nbsp;') {
                                       html += `<p class="festival-desc">${z.extraInfo2}</p>`;
                               }
                               html += `</div>`;
                       }
                       
                       // æ—¥æœˆé£Ÿä¿¡æ¯
                       if (ecl.value) {
                               html += `<div class="detail-section eclipse-section">`;
                               html += `<h4>ğŸŒ™ å¤©è±¡ä¿¡æ¯</h4>`;
                               html += `<p><strong>${ecl.value}</strong></p>`;
                               if (ecl.extraInfo) html += `<p>${ecl.extraInfo}</p>`;
                               if (ecl.extraInfo2) html += `<p>${ecl.extraInfo2}</p>`;
                               html += `</div>`;
                       }
                       
                       return html;
               }

               function copyDateInfo() {
                       if (!activeDate) return;
                       const z = getZangli(activeDate);
                       const ecl = getEclipse(activeDate);
                       const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                       
                       let copyText = `${activeDate.getFullYear()}å¹´${activeDate.getMonth()+1}æœˆ${activeDate.getDate()}æ—¥ å‘¨${weekDays[activeDate.getDay()]}\n`;
                       copyText += `è—å†ï¼š${z.value}\n`;
                       
                       if (z.extraInfo && z.extraInfo.trim() !== '' && z.extraInfo !== '&nbsp;') {
                               copyText += `èŠ‚æ—¥ï¼š${z.extraInfo.replace(/<br>/g, ' ')}\n`;
                               if (z.extraInfo2 && z.extraInfo2.trim() !== '' && z.extraInfo2 !== '&nbsp;') {
                                       copyText += `${z.extraInfo2}\n`;
                               }
                       }
                       
                       if (ecl.value) {
                               copyText += `å¤©è±¡ï¼š${ecl.value}\n`;
                               if (ecl.extraInfo) copyText += `${ecl.extraInfo.replace(/<br>/g, ' ')}\n`;
                       }
                       
                       if (navigator.clipboard) {
                               navigator.clipboard.writeText(copyText).then(() => {
                                       showToast('æ—¥æœŸä¿¡æ¯å·²å¤åˆ¶');
                               });
                       } else {
                               // é™çº§å¤„ç†
                               const textArea = document.createElement('textarea');
                               textArea.value = copyText;
                               document.body.appendChild(textArea);
                               textArea.select();
                               document.execCommand('copy');
                               document.body.removeChild(textArea);
                               showToast('æ—¥æœŸä¿¡æ¯å·²å¤åˆ¶');
                       }
               }

               function openDetail(date, anchor) {
                       if (!detailDialog) initDetailElements();
                       activeDate = date;
                       const isMobile = window.innerWidth <= 768;
                       detailDialog.classList.toggle('bottom-sheet', isMobile);
                       detailContent.innerHTML = buildDetailHTML(date);
                       detailMask.style.display = 'block';
                       detailDialog.style.display = 'block';
                       if (isMobile) {
                               requestAnimationFrame(() => detailDialog.classList.add('active'));
                       }
                       		detailDialog.querySelector('.close-btn').focus();
		const pad = n => n.toString().padStart(2, '0');
		history.pushState({}, '', `${basePath}date/${date.getFullYear()}-${pad(date.getMonth()+1)}-${pad(date.getDate())}`);
	}

               	function closeDetail() {
		if (!detailDialog) return;
		detailMask.style.display = 'none';
		if (detailDialog.classList.contains('bottom-sheet')) {
			detailDialog.classList.remove('active');
			setTimeout(() => { detailDialog.style.display = 'none'; }, 150);
		} else {
			detailDialog.style.display = 'none';
		}
		history.pushState({}, '', basePath);
	}

               	function shareDate() {
		if (!activeDate) return;
		const pad = n => n.toString().padStart(2, '0');
		const dateStr = `${activeDate.getFullYear()}å¹´${activeDate.getMonth()+1}æœˆ${activeDate.getDate()}æ—¥`;
		const url = `${location.origin}${basePath}date/${activeDate.getFullYear()}-${pad(activeDate.getMonth()+1)}-${pad(activeDate.getDate())}`;
		
		const shareData = {
			title: `ç™¾å¹´è—å† - ${dateStr}`,
			text: `æŸ¥çœ‹${dateStr}çš„è—å†ä¿¡æ¯`,
			url: url
		};
                       
                       if (navigator.share) {
                               navigator.share(shareData).catch(() => {
                                       // é™çº§åˆ°å¤åˆ¶é“¾æ¥
                                       fallbackCopyUrl(url);
                               });
                       } else {
                               fallbackCopyUrl(url);
                       }
               }

               function fallbackCopyUrl(url) {
                       if (navigator.clipboard) {
                               navigator.clipboard.writeText(url).then(() => {
                                       showToast('åˆ†äº«é“¾æ¥å·²å¤åˆ¶');
                               }).catch(() => {
                                       legacyCopyUrl(url);
                               });
                       } else {
                               legacyCopyUrl(url);
                       }
               }

               function legacyCopyUrl(url) {
                       const textArea = document.createElement('textarea');
                       textArea.value = url;
                       document.body.appendChild(textArea);
                       textArea.select();
                       document.execCommand('copy');
                       document.body.removeChild(textArea);
                       showToast('åˆ†äº«é“¾æ¥å·²å¤åˆ¶');
               }

               function showToast(msg) {
                       const t = document.createElement('div');
                       t.textContent = msg;
                       t.style.position = 'fixed';
                       t.style.bottom = '20px';
                       t.style.left = '50%';
                       t.style.transform = 'translateX(-50%)';
                       t.style.background = 'rgba(0,0,0,0.7)';
                       t.style.color = '#fff';
                       t.style.padding = '8px 12px';
                       t.style.borderRadius = '4px';
                       t.style.zIndex = '1001';
                       document.body.appendChild(t);
                       setTimeout(() => t.remove(), 2000);
               }

               function checkDeepLink() {
                       const m = location.pathname.match(/\/date\/(\d{4}-\d{2}-\d{2})/);
                       if (m) {
                               const d = new Date(m[1]);
                               if (!isNaN(d)) {
                                       const tbody = document.querySelector('.calendar-table tbody');
                                       const cells = tbody.getElementsByTagName('td');
                                       for (let td of cells) {
                                               if (td.title && td.title.includes(`${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ${d.getDate()}æ—¥`)) {
                                                       showDay(td);
                                                       openDetail(d, td);
                                                       break;
                                               }
                                       }
                               }
                       }
               }

               document.addEventListener('keydown', e => {
                       if (e.key === 'Escape') {
                               closeDetail();
                       }
                       if (detailDialog && detailDialog.style.display === 'block') {
                               if (e.key === 'c' && (e.ctrlKey || e.metaKey)) {
                                       e.preventDefault();
                                       copyDateInfo();
                               }
                               if (e.key === 's' && (e.ctrlKey || e.metaKey)) {
                                       e.preventDefault();
                                       shareDate();
                               }
                       }
               });

               window.addEventListener('load', () => {
                       zangli_callback();
                       checkDeepLink();
               });
		</script>
		<script>const trans = text => text;</script>
		<script src="zangli.js" charset="UTF-8"></script>
		<script src="eclipse.js" charset="UTF-8"></script>
		<script>
		window.onhashchange = zangli_callback;
		</script>
	</head>
	<body onkeyup="changeDate(event.keyCode)">
		<div class="container">
                        <div class="header">
                                <h1>ç™¾å¹´è—å†</h1>
                                <div id="countdown-placeholder-zh"></div>
                                <div id="countdown-placeholder-en"></div>
                                <!-- <div class="lang-switch"><a href="tw/index.html">ç¹é«”ä¸­æ–‡ / ç®€ä½“ä¸­æ–‡</a></div> -->
                                <div class="selected-day" id="selectedDay"></div>
                        </div>

			<div class="controls">
				<button onclick="changeYear(-1)" class="nav-btn prev-year"><span>â—€ ä¸Šä¸€å¹´</span></button>
				<button onclick="changeMonth(-1)" class="nav-btn prev-month"><span>â—€ ä¸Šä¸€æœˆ</span></button>
				<button onclick="goToToday()" class="nav-btn today-btn">ğŸ“… ä»Šå¤©</button>
				<button onclick="changeMonth(1)" class="nav-btn next-month"><span>ä¸‹ä¸€æœˆ â–¶</span></button>
				<button onclick="changeYear(1)" class="nav-btn next-year"><span>ä¸‹ä¸€å¹´ â–¶</span></button>
				
				<!-- éšè—çš„å¹´ä»½å’Œæœˆä»½é€‰æ‹©å™¨ï¼Œç”¨äºç»´æŠ¤åŸæœ‰é€»è¾‘ -->
				<select id="year" onchange="changeDate('year')" style="display: none;"></select>
				<select id="month" onchange="changeDate('month')" style="display: none;"></select>
			</div>

			<div class="calendar-container">
				<table class="calendar-table">
					<tbody onmousedown="showDay(event.target || event.srcElement)" onclick="showDay(event.target || event.srcElement)">
						<tr>
							<th>å‘¨æ—¥</th>
							<th>å‘¨ä¸€</th>
							<th>å‘¨äºŒ</th>
							<th>å‘¨ä¸‰</th>
							<th>å‘¨å››</th>
							<th>å‘¨äº”</th>
							<th>å‘¨å…­</th>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="selected-day-bottom" id="selectedDayBottom"></div>

			<div class="info-section">
				<h3>ğŸ“š æ•°æ®æ¥æº</h3>
				<p>â€¢ è—å†æ•°æ®æ¥æºäºã€Šè—å†ã€å…¬å†ã€å†œå†å¯¹ç…§ç™¾å¹´å†ä¹¦ï¼ˆ1951-2050ï¼‰ã€‹</p>
				<p>â€¢ æ—¥æœˆé£Ÿæ•°æ®æ¥è‡ªNASAï¼Œå¹¶ä»UTCæ—¶é—´è½¬æ¢åˆ°åŒ—äº¬æ—¶é—´è®¡ç®—æ—¥æœŸ</p>
				<p>â€¢ ç”±äºåœ°çƒä¸Šä¸åŒä½ç½®çœ‹åˆ°çš„åˆäºå¤åœ†æ—¶é—´ä¼šä¸åŒï¼Œæ—¶é—´å¯èƒ½å­˜åœ¨è¯¯å·®</p>
			</div>

			<div class="info-section">
				<h3>ğŸ”— å¼€æºä¿¡æ¯</h3>
				<p>æœ¬é¡µé¢å’Œæ•°æ®å¼€æºäº <a href="https://github.com/stonelf/zangli" target="_blank" style="color: var(--primary-color); text-decoration: none;">GitHub</a>ï¼Œæ¬¢è¿ä¸‹è½½ä½¿ç”¨ã€‚</p>
			</div>

			<noscript>
				<div class="info-section">
					<h3>é™æ€ç‰ˆæœ¬</h3>
					<p>ä¸æ”¯æŒJavaScriptçš„æµè§ˆå™¨å¯ä»¥ç›´æ¥è®¿é—®æœ¬æœˆå†çš„HTMLç‰ˆæœ¬ï¼š
						<a href="calendar/1952.html">1952å¹´è—å†æœˆå†</a> 
						<a href="calendar/1953.html">1953å¹´è—å†æœˆå†</a> 
						<!-- å…¶ä»–å¹´ä»½é“¾æ¥çœç•¥ä»¥ä¿æŒç®€æ´ -->
					</p>
				</div>
			</noscript>
                </div>
                <div id="detailMask" onclick="closeDetail()"></div>
                <div id="detailDialog" aria-modal="true" role="dialog" tabindex="-1" aria-labelledby="detailTitle" aria-describedby="detailContent">
                        <div class="dialog-header">
                                <button class="share-btn" onclick="shareDate()" aria-label="åˆ†äº«æ—¥æœŸ">åˆ†äº«</button>
                                <button class="close-btn" onclick="closeDetail()" aria-label="å…³é—­å¼¹çª—">Ã—</button>
                        </div>
                        <div id="detailContent"></div>
                        <div class="dialog-footer">
                                <button class="copy-btn" onclick="copyDateInfo()" aria-label="å¤åˆ¶æ—¥æœŸä¿¡æ¯ (Ctrl+C)">ğŸ“‹ å¤åˆ¶ä¿¡æ¯</button>
                        </div>
                </div>
        </body>
</html>
